# EC100 (Communicate with EC150 or EC155)

The EC100 instruction is used to communicate with the EC150 or EC155 via SDM.

## Syntax

EC100(Dest,SDMAddress,EC100Cmd)

The following program is an example of collecting SDM data from an EC155.

```
Public sonic_irga(13)
```

Alias sonic_irga(1) = Ux
Alias sonic_irga(2) = Uy
Alias sonic_irga(3) = Uz
Alias sonic_irga(4) = Ts
Alias sonic_irga(5) = diag_sonic
Alias sonic_irga(6) = CO2
Alias sonic_irga(7) = H2O
Alias sonic_irga(8) = diag_irga
Alias sonic_irga(9) = cell_tmpr
Alias sonic_irga(10) = cell_press
Alias sonic_irga(11) = CO2_sig_strgth
Alias sonic_irga(12) = H2O_sig_strgth
Alias sonic_irga(13) = diff_press
Units Ux = m/s
Units Uy = m/s
Units Uz = m/s
Units Ts = C
Units diag_sonic = arb
Units CO2 = umol/mol
Units H2O = mmol/mol
Units diag_irga = arb
Units cell_tmpr = C
Units cell_press = kPa
Units CO2_sig_strgth = arb
Units H2O_sig_strgth = arb
Units diff_press = kPa

DataTable (ts_data,TRUE,-1)
DataInterval (0,0,mSec,10)
Sample (13,Ux,IEEE4)
EndTable

BeginProg
Scan (100,mSec,0,0)
EC100(Ux,1,2)
CallTable ts_data
NextScan
EndProg

```
The following program is an example of collecting SDM data from an EC150.

```

Public sonic_irga(12)
Alias sonic_irga(1) = Ux
Alias sonic_irga(2) = Uy
Alias sonic_irga(3) = Uz
Alias sonic_irga(4) = Ts
Alias sonic_irga(5) = diag_sonic
Alias sonic_irga(6) = CO2
Alias sonic_irga(7) = H2O
Alias sonic_irga(8) = diag_irga
Alias sonic_irga(9) = amb_tmpr
Alias sonic_irga(10) = amb_press
Alias sonic_irga(11) = CO2_sig_strgth
Alias sonic_irga(12) = H2O_sig_strgth
Units Ux = m/s
Units Uy = m/s
Units Uz = m/s
Units Ts = C
Units diag_sonic = arb
Units CO2 = mg/m^3
Units H2O = g/m^3
Units diag_irga = arb
Units amb_tmpr = C
Units amb_press = kPa
Units CO2_sig_strgth = arb
Units H2O_sig_strgth = arb

DataTable (ts_data,TRUE,-1)
DataInterval (0,0,mSec,10)
Sample (12,Ux,IEEE4)
EndTable

BeginProg
Scan (100,mSec,0,0)
EC100(Ux,1,1)
CallTable ts_data
NextScan
EndProg

```

## Parameters



# Destination


The input variable name in which to store the data from the EC150 or EC155. The length of the input variable array will depend on the selected command. A value of -99999 will be loaded into Dest(1) if a signature error on SDM data occurs.

| Command | Input Variable Length |
| --- | --- |
| 0 | 8 |
| 1 | 12 |
| 2 | 13 |

Type: Array


# SDMAddress (Address of Device)


Defines the address of the device with which to communicate. ValidSDM

**Note:** Synchronous Device for Measurement. A processor-based peripheral device or sensor that communicates with the datalogger via hardwire over a short distance using a protocol proprietary to Campbell Scientific.

addresses are 0 through 14. Address 15 is reserved for the SDMTrigger instruction.

Some SDM instructions support repetitions. If a Reps parameter is present and it is greater than 1, the data logger will increment the SDM address used in the instruction for each subsequent device with which it communicates.


# EC100Cmd


Requests the data to be retrieved from the sensor. The results for the command will be returned in the array specified by the Dest parameter. A numeric code is entered to request the data:

| Code | Description |
| --- | --- |
| 0 | Ux (m/s), Uy (m/s), Uz (m/s), Ts (C), sonic diagnostic (arb), CO2\*, H2O\*, gas diagnostic (arb) |
| 1 | Ux (m/s), Uy (m/s), Uz (m/s), Ts (C), sonic diagnostic (arb), CO2\*, H2O\*, gas diagnostic (arb), ambient temperature (C), ambient pressure (kPa), CO2 signal strength (arb), H2O signal strength (arb) |
| 2 | Ux (m/s), Uy (m/s), Uz (m/s), Ts (C), sonic diagnostic (arb), CO2\*, H2O\*, gas diagnostic (arb), cell temperature (C), cell pressure (kPa), CO2 signal strength (arb), H2O signal strength (arb), sample cell pressure differential (kPa).\*\* (Available only from EC155) |

\* An EC150 outputs CO2 density (mg/m^3) and H2O density (g/m^3). An EC155 outputs CO2 molar mixing ratio (umol/mol) and H2O molar mixing ratio (mmol/mol). Molar mixing ratio is the concentration relative to dry air.

\*\* If EC100 OS version 7.01 or later is loaded and an open-path gas analyzer (i.e., EC150 or IRGASON) is connected to the EC100, the 13th data field will be CO2 density (mg/m^3) calculated from fast-response temperature. Specifically, this additional CO2 density output uses humidity-corrected sonic temperature, instead of ambient temperature measured by the EC100 temperature probe, in the conversion of absorption measurements to CO2 density. Using the sonic anemometer s fast-response temperature measurements compensates for spectroscopic effects during high sensible heat flux regimes as explained in Helbig et al. (2016). For open-path gas analyzers connected to an EC100 running an OS version less than 7.01, the 13th data field is unused.

Reference: Helbig, M., Wischnewski, K., Gosselin, G.H., Biraud, S.C., Bogoev, I., Chan, W.S., Euskirchen, E.S., Glenn, A.J., Marsh, P.M., Quinton, W.L., and Sonnentag, O.: 2016, Addressing a Systematic Bias in Carbon Dioxide Flux Measurements with the EC150 and the IRGASON Open-Path Gas Analyzers , Agricultural and Forest Meteorol., 228-229 (2016), 349-359.
```
