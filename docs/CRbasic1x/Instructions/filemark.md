# FileMark (Insert Data Table Filemark

The FileMark instruction is used to insert a filemark into a DataTable.

## Syntax

FileMark(Tablename)

The following is a DataTable, generated by the example program below, that has been converted to ASCII without processing the FileMarks. The records that have FileMarks are highlighted and have text added to the side for illustrative purposes. The FileMarks cannot actually be viewed in the DataTables.

File = TempConv.dat
"1999-04-15 10:52:57.5",90.5
"1999-04-15 10:52:58",90.6
"1999-04-15 10:52:58.5",89.3
"1999-04-15 10:52:59",88
**"1999-04-15 10:52:59.5",87.5 **'Record containing the FileMark
"1999-04-15 10:53:13.5",90.5
"1999-04-15 10:53:14",90.5
"1999-04-15 10:53:14.5",89.6
"1999-04-15 10:53:15",88.5
**"1999-04-15 10:53:15.5",87.7 **'Record containing the FileMark
"1999-04-15 10:53:28",90
"1999-04-15 10:53:28.5",90
"1999-04-15 10:53:29",88.9
"1999-04-15 10:53:29.5",88.1
**"1999-04-15 10:53:30",87.6 **'Record containing the FileMark

If the same DataTable was converted with the FileMarks processed, three data files would be created as follows:

File = TempConv.000
"1999-04-15 10:52:57.5",90.5
"1999-04-15 10:52:58",90.6
"1999-04-15 10:52:58.5",89.3
"1999-04-15 10:52:59",88
**"1999-04-15 10:52:59.5",87.5 **'Record containing the FileMark
File = TempConv.001
"1999-04-15 10:53:13.5",90.5
"1999-04-15 10:53:14",90.5
"1999-04-15 10:53:14.5",89.6
"1999-04-15 10:53:15",88.5
**"1999-04-15 10:53:15.5",87.7 **'Record containing the FileMark
File = TempConv.002
"1999-04-15 10:53:28",90
"1999-04-15 10:53:28.5",90
"1999-04-15 10:53:29",88.9
"1999-04-15 10:53:29.5",88.1
**"1999-04-15 10:53:30",87.6**'Record containing the FileMark

```
Public Count, TCTemp, TREF, Flag(1)

DataTable(Temp,True,-1)
DataInterval(0,1,sec,50)
CardOut(0,1000)'Write data to memory card A
Sample (1,TCTemp,FP2)
EndTable

BeginProg
Scan(1,Sec,0,0)
PanelTemp (TRef,15000)
TCDiff (TCTemp,1,mv200C,1,TypeT,TRef,True,200,15000,1.8,32)

If TCTemp>90 then Flag(1)=True'Set Flag1 high when Temp>90
If Flag(1) = 1 then
Count = Count +1'Increment Counter
If Count = 5 thenFileMark(Temp)'Set a FileMark on the last record of set
CallTable TEMP
EndIf
If Count = 5'When Count =5 then do
Count = 0'Set counter back to 0
Flag(1) = 0'Set Flag(1) low
EndIf
NextScan
EndProg
```

## Remarks

After the FileMark instruction is encountered, a filemark will be added to the next record written to the specified Table. The filemark inserted by this instruction indicates to the software processing the file that a new file should be started after the marked record. To make use of FileMarks, the DataTable must be kept in TOB3 format and processed using the CardConvert binary file utility (e.g., move the card to the PC and convert the files from the card, or collect the TOB3 file from the card using FileControl. Once the data is converted to some other ASCII or binary format, FileMarks are lost.)

Note that this instruction marks the affected record as the last record of a file. The next record in the DataTable will be the first record of the new file. Therefore, the program logic should ensure that the FileMark instruction is encountered immediately prior to writing the record desired to be the last record of a file.

## Parameter

# Name

The name of the output table defined in the program.

Type: Name
